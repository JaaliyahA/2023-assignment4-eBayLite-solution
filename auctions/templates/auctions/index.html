{% extends "auctions/layout.html" %}

{% block main %}

<h2>{{banner}}</h2>

<article>
    {% for listing in listings %}
    <section>
        <div class="container">
            <div class="accordion" id="accordionExample">
                <div class="accordion-item">
                    <h2 class="accordion-header">
                        <button class="accordion-button" type="button" data-bs-toggle="collapse"
                            data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                            Listings

                        </button>
                    </h2>
                    <div id="collapseOne" class="accordion-collapse collapse show" data-bs-parent="#accordionExample">
                        <div class="accordion-body">

                        </div>

                        <h3>
                            {% if user.is_authenticated %}
                            <button class="btn btn-primary" type="button" name="doit" value={{listing.id}}
                                id="watchlistButton">
                                {% if listing.id in watched %}
                                <i class="bi bi-heart-fill"></i>
                                {% else %}
                                <i class="bi bi-heart"></i>
                                {% endif %}
                            </button>
                            {% endif %}
                            <a href="{% url 'listing' listing.id %}"">
                    {% if listing.image %}
                        <img src=" {{ listing.image.url }}" width="50px">
                                {% endif %}
                                {{listing.title}}
                            </a>
                            <small>
                                High Bid: ${{ listing.high_bid_amount }}
                                {% if not listing.active %}
                                - Auction Closed
                                {% endif %}
                            </small>
                        </h3>
                        <div class="listing-description">{{ listing.description }}</div>
                        <p>
                            {{ listing.watcher_count }} watchers | {{ listing.bid_count }} bidders |
                            {{listing.comment_count }} comments
                        </p>
    </section>
    {% endfor %}
</article>
{% endblock %}