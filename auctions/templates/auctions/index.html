{% extends "auctions/layout.html" %}

{% block main %}

<h2 class="display-6 mb-6" style="color:#1b263b;">{{banner}}</h2>
<hr>

<article>
    {% for listing in listings %}
    <section>
        <div class="accordion accordion-flush" id="accordion">
            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                        data-bs-target="#collapse_{{listing.id}}">
                        <h4 class="lead fs-4">
                            {% if listing.image %}
                            <img src=" {{ listing.image.url }}" width="75px">
                            {% endif %}
                            {{listing.title}}
                        </h4>
                    </button>
                </h2>
                <div id="collapse_{{listing.id}}" class="accordion-collapse collapse" data-bs-parent="#accordion">
                    <div class="accordion-body">
                        <h3>
                            {% if user.is_authenticated %}
                            <button class="btn btn-primary" type="button" name="doit" value={{listing.id}}
                                id="watchlistButton">
                                {% if listing.id in watched %}
                                <i class="bi bi-heart-fill"></i>
                                {% else %}
                                <i class="bi bi-heart"></i>
                                {% endif %}
                            </button>
                            {% endif %}
                            <a href="{% url 'listing' listing.id %}"">
                                    {{listing.title}}
                                </a>
                                <small>
                                    High Bid: ${{ listing.high_bid_amount }}
                                    {% if not listing.active %}
                                    - Auction Closed
                                    {% endif %}
                                </small>
                            </h3>
                            <div class=" listing-description m-2 p-3">
                                <p class="fst-italic lh-lg">{{ listing.description }}</p>
                    </div>
                    <p>
                        {{ listing.watcher_count }} watchers | {{ listing.bid_count }} bidders |
                        {{listing.comment_count }} comments
                    </p>
                </div>

    </section>
    {% endfor %}
</article>
{% endblock %}